<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../wheel-select/wheel-select.html">

<polymer-element name="date-select" layout horizontal center-justified>

<template>
    <style>

        :host {
            display: block;
            /* -webkit-perspective: 1000px; */
            perspective: 1000px;
            text-align: center;
            min-width: 235px;
        }

        wheel-select {
            /* -webkit-perspective: 0 !important; */
            perspective: 0 !important;
        }

        wheel-select::shadow .option {
            padding: 0 10px;
        }

        .days::shadow .option {
            text-align: right;
        }

        .months::shadow .option, .years::shadow .option {
            text-align: left;
        }

        .days {
            width: 60px;
        }

        .months {
            min-width: 100px;
            max-width: 150px;
        }

        .years {
            width: 75px;
        }
    </style>

    <wheel-select options="{{ days }}" value="{{ day }}" class="days"></wheel-select>
    <wheel-select options="{{ months }}" value="{{ month }}" class="months" flex></wheel-select>
    <wheel-select options="{{ years }}" value="{{ year }}" class="years"></wheel-select>

</template>

<script>
(function() {
    'use strict';

    Polymer({

        months: [
            { label: 'January', value: 0 },
            { label: 'February', value: 1 },
            { label: 'March', value: 2 },
            { label: 'April', value: 3 },
            { label: 'May', value: 4 },
            { label: 'June', value: 5 },
            { label: 'Juli', value: 6 },
            { label: 'August', value: 7 },
            { label: 'September', value: 8 },
            { label: 'October', value: 9 },
            { label: 'November', value: 10 },
            { label: 'Dezember', value: 11 },
        ],

        publish: {
            day: 1,
            month: 0,
            year: 0
        },

        computed: {
            days: 'daysInMonth(month, year)'
        },

        created: function() {
            var currYear = new Date().getFullYear();
            var years = [];

            for (var y = currYear; y < currYear + 20; y++) {
                years.push(y);
            }

            this.years = years;
            this.year = currYear;
        },

        daysInMonth: function(month, year) {
            var lastDay = new Date(year, month + 1, -1).getDate();
            var days = [];
            for (var d = 1; d <= lastDay; d++) {
                days.push(d);
            }
            return days;
        }

    });
})();
</script>

</polymer-element>
